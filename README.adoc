
= Spring Boot Starter for Bucket4j

https://github.com/vladimir-bukhtoyarov/bucket4j

== Configuration via properties

[source,yml]
----
bucket4j:
  rate-limit:
    enabled: true
    configs:
    - cache-name: buckets   # create new servlet filter with bucket4j configuration
      filter-type: default  # filter all requests indipendently from the source
      url: /*
      bandwidths: 
      - # maximum of 5 requests within 10 seconds
        capacity: 5
        time: 10
        unit: seconds  
    - cache-name: buckets
      filter-type: ip			# ip based filter
      url: /abc*
      bandwidths: 
      -
        capacity: 5
        time: 10
        unit: seconds
    - cache-name: buckets
      filter-type: expression  # expression based filter key evaluation
      expression: "T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication()?.getName()?: getRemoteAddr()" # use the username as key. if authenticated use the ip address
      url: /*
      filter-order: 0
      bandwidths: 
      -
        capacity: 5
        time: 10
        unit: seconds    
----

== Configuration with @Bean

